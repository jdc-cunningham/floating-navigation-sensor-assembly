12:27 PM

Let's gooooo, got some sleep, day off

Will work on finding the center of the red + parts

Then I'll calibrate it for measurement... it's possible there is a fundamental approach with what I'm doing where you can't really gauge where something is with just one camera.

"motion parallax" interesting

How do I get anything done like this

<img src="../../images/apollo-in-the-way.JPG"/>

There is something else I have to do, I have to find the optimal crop

It's -5F right now and it is cold haha, window behind my monitor, I feel a breeze, got the fold at home running on low to generate some heat

I have to come from the top and find the lowest non-black pixel and then from the sides, lowest meaning towards the middle.

Ha 8 years ago
https://stackoverflow.com/questions/23847627/cropping-panorama-image-in-opencv

My approach would have been to use 4 loops which you could use just one

ha written in c++

anyway I think I can do this, I just remember iterating through pixels was slow as hell

This photo is 2535x1309 as in roughly 3.32 million pixels

That can take some time

12:53 PM

Wow yeah... this is super slow

will take a few minutes to iterate over all the pixels

12:59 PM

hmm

https://stackoverflow.com/questions/72575930/remove-all-black-after-opencv-homography

think I could cheat and use imagemagick lol

this one looks good
https://stackoverflow.com/questions/10632617/how-to-remove-black-part-from-the-image

I've used findContours before, it's the main thing I use to find blobs

1:15 PM

hmm that approach is failing

1:24 PM

oh yeah I saw this boolean matrix thing before

https://stackoverflow.com/questions/13003949/faster-way-to-loop-through-every-pixel-of-an-image-in-python

1:49 PM

still struggling

1:54 PM

I'm going to go for the dumb approach

I don't think it'll take too long to iterate 4x of roughly 80x80 or so loops

vs. 3 million straight up

2:14 PM

ugh... the axes are backwards from img as in index 0 is y not x

2:22 PM

Damn my toes are freezing lol, it's definitely cold #thank_science_im_not_a_neanderthal

2:56 PM

Yeah... my approach doesn't make sense

There are many outer points before you get to the corners

What about... making th largest square from the corners and then using those

maximize the four points and choose the lowest two/opposite corners

3:03 PM

let me go back to the countour finding code

3:17 PM

ugh... not working

<img src="../../images/mask.JPG"/>

The red areas are squares, so it's not able to find a contigous area larger than the black spot on the middle/left

3:32 PM

spacing out...

damn can't believe I still haven't solved this, even the crude way of coming in from the outside out to work

the mask is interesting since it's an easy 1 or 0 (white/black)

3:37 PM

There is another dumb solution I can think of, iterate over entire widths and find the largest non-black set, do that for all four sides... sucks

You could also do "middle out" guy watches silicon valley, where you know the middle area has the largest concentration of pixels as a base line for comparison

3:44 PM

I've actually been approaching this wrong anyway

since the outer corners are not the "inner most" pixels... eg if you crop from there, you would still have black gaps in between the corners

the other issue is the edges of the panorama can have black areas so hard to tell where the edge is... in general you know it will be a rectangle

I might call it here today... will just chill, work on other stuff, sucks

Here you can see an edge case where behind the door is darkness/can think that's part of the filler pixels (black)

<img src="../../images/current-crop-alg.JPG"/>

Now to do some trials on the field

5:35 PM

Damn it lol it died

For the battery, laziest thing I can do is a web interface button

I click it on first boot, that resets the wake timer down to 0 and counts back up to the expected 5-6 hours

9:39 PM

let me do some test pans

I decided I'd just try to complete the vision part of this project (where it can find things/point the beams at them and get a good distance)

Damn... it takes a while lol... like 5 minutes+ but it works

Then it's gotta do the masking, point/measure... wow it's definitely not a realtime VIO system running at 60fps

9:52 PM

sometimes the pan gen fails

fails on final build where it statcks the horizontal slices vertically

this time it worked... huh

same location just ran again

I want to see what these outputs are so I can catch them

Damn this one has a deep cut on the right side (area to remove from void)

taking a while to crop

ooh it finished

3 minutes to crop lol brutal

10:08 PM

wow it seems like a small area you don't want a lot of images otherwise it just looks bad...

hmm, adaptive panorama would be good, but without me looking at it, not sure how to tell if the panorama sucks

other thing is dark places, I have a little LED on there, supposed to be 2 but I dropped it to one, would be nice to incorporate the LED in during photo taking process

10:13 PM

I put it in a dark hallway and the panoramas are failing to generate

I need a "all have to pass" check

Let me try turning the light on, see if it helps

lmao it's so cute

<img src="../../images/light.JPG"/>

This light is almost useless though

it's bright but not enough of them

Oh interesting so the output... 0, some matrix if True

1, None if false not sure what this means

What's funny is the top level on its own is pretty good.

I just gotta see how low it can see... factor that into the nav logic.

So it can adapt, if it only succeeded in generating a top panorama, only use that.

I need copies of the image too before adding the red cross hair so the red doesn't affect blob finding

two panorama copies too maybe... sucks doubles time

10:30 PM

that's something I can do now see the top-level

let me do one more

yeah dark images fail to stitch

I'll need that dark image check

https://stackoverflow.com/questions/52505906/find-if-image-is-bright-or-dark

it's cool watching the CPU core at 100% trying to do my shit math

sometimes the panoramas are f'd damn

10:49 PM

* check brightness
* make sure all images pass
* stop future processing if some step fails/adapt

